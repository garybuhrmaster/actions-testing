---
name: build

on:

  push:
    branches: [main]

  pull_request:
    branches: [main]

jobs:

  deb-build:

    name: Build on ${{ matrix.container }}

    runs-on: ubuntu-latest

    strategy:
      matrix:
        container:
        - ubuntu:16.04
        - ubuntu:18.04
        - ubuntu:20.04

    container:
      image: ${{ matrix.container }}

    steps:
    - run: cat /etc/debian_version

  rpm-build:

    name: Build on ${{ matrix.container }}

    runs-on: ubuntu-latest

    strategy:
      matrix:
        container:
        - fedora:35
        - fedora:34
        - fedora:33

    container:
      image: ${{ matrix.container }}

    steps:
    - run: cat /etc/os-release

  windows-build:

    name: Build on Windows

    runs-on: windows-latest

    steps:

      - name: perl -V
        run: perl -V

